services:
  plugin.manager.avatars_services:
    class: Drupal\avatars\AvatarKitServicePluginManager
    parent: default_plugin_manager
  avatars.avatar_kit.discovery.services:
    class: Drupal\avatars\AvatarKitAvatarServiceDiscovery
    arguments: ['@class_loader', '@cache.discovery']
  avatars.avatar_kit.factory.services:
    class: dpi\ak\AvatarServiceFactory
    arguments: ['@avatars.avatar_kit.discovery.services']
  avatars.entity_preference:
    class: Drupal\avatars\AvatarKitEntityPreferenceManager
    arguments: ['@event_dispatcher', '@entity_type.manager']
  avatars.entity_preference.default_subscriber:
    class: Drupal\avatars\EventSubscriber\AvatarKitDefaultPreferenceSubscriber
    tags:
      - { name: event_subscriber }
  avatars.utility.download:
    class: Drupal\avatars\AvatarKitDownloadUtility
    arguments: ['@entity_type.manager', '@file_system', '@file.usage', '@http_client', '@logger.channel.avatars']
  logger.channel.avatars:
    parent: logger.channel_base
    arguments: ['avatars']
